# 一、缓存Redis的使用

## 1.1.缓存的优点

一句话，为了系统可以更快更健全的响应用户的操作，这也是缓存的优点，**高性能**和**高并发**，如果用户经常访问一些数据，每次都查询数据库耗时800ms，那么如果将这些数据放在缓存中，对应一个`key`，第二次查询的直接从缓存中获取，2ms搞定，性能提升了400倍。数据库能支持的并发都是有限制的，然而内存是天然支持高并发的，缓存就是走的内存。

所以，在一般的业务系统中，经常使用的缓存就是`redis`和`Ecache`两种，将用户信息，组织结构信息，登陆的`token`信息，单值代码信息等放在缓存中。

## 1.2.缓存的缺点

缓存就相当于一个第三方或者保镖，也起到了保护数据库的作用，在高并发的情况下，更多的请求走缓存，减轻了数据库的压力，但是作为了一个第三方就会存在一个缓存里面的数据和数据库里面的数据不一致，这就是缓存的缺点之一，**缓存与数据库数据不一致**，保镖也是抵挡不了和看走眼的时候，这就会出现缓存的另外几个重大缺点，**缓存雪崩**、**缓存穿透**和**缓存击穿**。当然，存在缺点不可怕，因为有解决的办法。

## 1.3.NoSql和RDBMS

开发中使用的`Mysql`、`PostgreSQL`等等都属于关系数据库，满足`ACID`特性，`NoSql`泛指的就是非关系型数据库，存储的数据没有固定的模式，可以很轻松的实现横向扩展，常用的`NoSql`落地的产品有`Redis`，`Memcached`等等。下表列出二者的一些特性，以做比较。

| RDBMS                                | NoSql                            |
| ------------------------------------ | -------------------------------- |
| 组织结构化数据                       | 最终一致性，非ACID属性           |
| 使用结构化查询语言SQL                | 没有声明性的查询语言             |
| 严格的一致性                         | 没有预定义的模式                 |
| 数据和数据之间的关系存储在单独的表中 | 键值对存储，文档存储，图形化存储 |
| 事务                                 | 高性能，高可用和易扩展           |

## 1.4.Redis简介

* [英文官网](<https://redis.io/>)
* [中文官网](<http://www.redis.cn/>)

`Redis` 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。具备以下几个特点：

* `Redis`支持数据的持久化，可以将内存中的数据保存在磁盘中，重启`Redis`时候可以再次加载使用。
* `Redis`支持多种类型的数据结构的存储，如 `字符串`， `散列`， `列表`， `集合`， `有序集合`等。
* `Redis`支持数据的备份。
* `Redis`支持数据的自动过期失效。

